== Configuration du plugin

La configuration est très simple, après téléchargement du plugin, il vous suffit de l'activer et c'est tout. Le plugin va rechercher les Sonos sur votre réseau et créer les équipements automatiquement. De plus, si il y a une correspondance entre les objets Jeedom et les pièces du Sonos, Jeedom affectera automatiquement les Sonos dans les bonnes pièces.

[TIP]
Ce plugin nécessite que les Sonos soit alimentés (même en mode veille) pour ne pas provoquer d'erreur. 

Si plus tard vous ajoutez un Sonos, vous pouvez soit créer un équipement Sonos en donnant l'IP à Jeedom ou cliquer sur "Rechercher les équipements Sonos" : 

image::../images/sonos1.PNG[]

* Fournisseur TTS : permet de choisir le service qui fait la transformation du texte à lire (voxygen est moins limité que google mais le deux nécessite d'avoir un partage alors que Google Translate pas besoin), si vous choissiez voxygen vous pouvez aussi choisir le type de voix.
* [TTS] Chemin local du répertoire partagé : le chemin tel que vu par Jeedom vers le repertoire partagé (voir chapitre sur le TTS)
* [TTS] Chemin Sonos du répertoire paratagé : chemin tel que vu par le Sonos vers le repertoire partagé (voir chapitre sur le TTS)

[IMPORTANT]
Les messages trop long ne peuvent etre transmis en TTS (la limite depend du fournisseurs de TTS, en général environ 100 caractères)

== Configuration des équipements

La configuration des équipements Sonos est accessible à partir du menu plugin : 

image::../images/sonos2.PNG[]

Voilà à quoi ressemble la page du plugin Sonos (ici avec déjà 3 équipements) : 

image::../images/sonos3.PNG[]

Vous retrouvez ici la liste de vos Sonos avec une image en fonction du modèle. Une fois que vous cliquez sur un équipement vous obtenez : 

image::../images/sonos4.PNG[]

Vous retrouvez ici toute la configuration de votre équipement : 

* *Nom de l'équipement Sonos* : nom de votre équipement Sonos
* *Objet parent* : indique l'objet parent auquel appartient l'équipement
* *Activer* : permet de rendre votre équipement actif
* *Visible* : le rend visible sur le dashboard
* *Modèle* : le modèle de votre Sonos (à ne changer que si ce n'est pas le bon)
* *IP* : l'IP de votre Sonos, peut être utile si votre Sonos change d'IP ou si vous le remplacez

En dessous vous retrouvez la liste des commandes : 

* *Nom* : nom de la commande
* *Configuration avancée (petites roues crantées)* : permet d'afficher la configuration avancée de la commande (méthode d'historisation, widget...)
* *Tester* : permet de tester la commande

Comme commande vous retrouverez : 

* *Jouer playlist* : commande de type message permettant de lancer une playlist, il suffit dans le titre de mettre le nom de la playlist. Vous pouvez mettre "random" dans message pour mélanger la playlist avant la lecture.
* *Jouer une radio* : commande de type message permettant de lancer une radio, il suffit dans le titre de mettre le nom de la radio (ATTENTION celle ci doit etre dans les radio favorites).
* *Ajout un haut parleur* : permet d'ajouter à haut parleur (un sonos) au haut parleur courant (pour associer 2 sonos par exemple). Il faut mettre le nom de la piece du sonos à ajouter dans le titre (le champs message n'est pas utilisé ici).
* *Supprimer un haut parleur* : permet de supprimer un haut parleur (un sonos) au haut parleur courant (pour associer 2 sonos par exemple). Il faut mettre le nom de la piece du sonos à supprimer dans le titre (le champs message n'est pas utilisé ici).
* *Aléatoire statut* : indique si on est en mode aléatoire ou non
* *Aléatoire* : inverse le statut du mode aléatoire
* *Répéter statut* : indique si on est en mode répété ou non
* *Répéter* : inverse le statut du mode "répéter"
* *Image* : lien vers l'image de l'album
* *Album* : nom de l'album en cours de lecture
* *Artiste* : nom de l'artiste en cours de lecture
* *Piste* : nom de la piste en cours de lecture
* *Muet* : passe en muet
* *Précédent* : piste précédente
* *Suivant* : piste suivante
* *Lecture* : passer en lecture
* *Pause* : mettre en pause
* *Stop* : arrêter la lecture
* *Volume* : modifier le volume (de 0 à 100)
* *Volume statut* : niveau du volume
* *Statut* : statut (pause, lecture, transition...)
* *Dire* : permet de lire un texte sur le sonos (voir partie TTS). Dans le titre vous pouvez mettre le volume et dans le message, le message à lire

== TTS

Le TTS (text-to-speech) vers le Sonos necessite d'avoir un partage Windows (Samba) sur le réseaux (imposé par Sonos, pas moyen de faire autrement). Il faut vous donc un NAS sur le reseaux. La configuration est assez simple il faut mettre le nom ou l'ip du nas (attention à bien mettre la même chose que ce qui est déclaré sur sonos), le nom d'utilisateur et le mot de passe (attention l'utilisateur doit avoir les droits en écriture) et le chemin (il est conseillé de faire un sous dossier tts)

[IMPORTANT]
Il faut absolument mettre un mot de passe pour que cela marche

== Widget

Sur le dashboard vous retrouverez le widget suivant : 

image::../images/sonos5.PNG[]

A partir de ce widget (et seulement en version desktop), vous pouvez voir les musiques dans la file d'attente et les playlists disponibles pour lancer leur lecture, gerer la sortie sur different sonos et les radios favorites.

== Le panel

Le plugin Sonos met aussi à disposition un panel qui rassemble tout vos Sonos. Disponible a partir du menu Accueil -> Sonos Controller : 

image::../images/sonos7.PNG[]

Cela permet d'avoir ce genre de vue synthétique :

image::../images/sonos8.PNG[]

Il existe aussi une version mobile du panel, accessible à partir de Plugins -> Sonos controller : 

image::../images/sonos9.PNG[]

Il vous permet comme en version bureau d'avoir une vue synthetique de vos Sonos : 

image::../images/sonos10.PNG[]